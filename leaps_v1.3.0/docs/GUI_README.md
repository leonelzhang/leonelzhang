# Leaps

一个功能强大的图形化界面，用于查看和分析纳斯达克股票的价格走势。

## 功能特性

### 核心功能
- 📊 **多种图表类型**: 折线图、K线图、成交量图
- 📈 **技术指标**: 移动平均线(MA20/MA50/MA200)、布林带、MACD
- 🎯 **买卖信号**: 自动检测价格突破和跌破，标注B/S信号
- 🎯 **灵活的时间范围**: 支持1个月到10年的多种时间周期
- 💾 **数据导出**: 支持导出为CSV和Excel格式
- 🖼️ **图表保存**: 支持保存为PNG和PDF格式

### 界面特点
- 🖥️ **直观的GUI界面**: 基于tkinter的现代化界面
- ⚡ **快速响应**: 多线程处理，界面流畅
- 📱 **常用股票快捷按钮**: 一键选择热门股票
- 📊 **实时统计信息**: 自动计算并显示关键指标

## 安装依赖

```bash
pip install -r requirements.txt
```

或手动安装：

```bash
pip install yfinance pandas matplotlib
```

## 快速开始

### 启动程序

**测试版 (使用模拟数据):**
```bash
python stock_viewer_gui_test.py
```

**完整版 (需要真实API访问):**
```bash
python stock_viewer_gui.py
```

### 使用步骤

1. **输入股票代码**
   - 在"股票代码"输入框中输入股票代码（如 AAPL）
   - 或点击"常用股票"按钮快速选择

2. **选择时间范围**
   - 从下拉菜单选择时间周期：
     - 1mo: 1个月
     - 3mo: 3个月
     - 6mo: 6个月
     - 1y: 1年
     - 2y: 2年
     - 5y: 5年
     - 10y: 10年
     - ytd: 年初至今
     - max: 最大可用时间

3. **选择数据间隔**
   - 1d: 日线
   - 5d: 5日线
   - 1wk: 周线
   - 1mo: 月线
   - 3mo: 季线

4. **选择图表类型**
   - line: 折线图
   - candlestick: K线图
   - volume: 成交量图

5. **设置显示选项**
   - ☑ 移动平均线: 显示MA20、MA50、MA200
   - ☑ 成交量: 显示成交量柱状图
   - ☑ 布林带: 显示布林带指标
   - ☑ 买卖信号: 显示价格突破/跌破信号（B/S）
   - ☑ MACD指标: 显示MACD技术分析图表
   - 信号周期: 选择买卖信号的时间周期（1mo/3mo/6mo/1y）

6. **获取数据**
   - 点击"获取数据"按钮
   - 等待数据加载完成
   - 图表和统计信息将自动更新

7. **保存和导出**
   - 点击"保存图表"保存当前图表
   - 点击"导出数据"导出原始数据

## 界面说明

### 控制面板 (左侧)
- **股票代码**: 输入要查询的股票代码
- **时间周期**: 选择数据的时间范围
- **数据间隔**: 选择数据的时间间隔
- **图表类型**: 选择图表显示方式
- **显示选项**: 勾选要显示的技术指标
- **操作按钮**: 获取数据、刷新图表、保存图表、导出数据
- **常用股票**: 快速选择热门股票

### 价格曲线 (右上)
- 显示股票价格走势图
- 支持缩放和平移
- 显示图例和网格线

### 股票信息 (右下)
- 显示股票基本信息
- 价格统计（当前价、最高价、最低价、涨幅）
- 成交量统计
- 波动率统计

## 常用股票代码

| 代码 | 公司 | 行业 |
|------|------|------|
| AAPL | 苹果 | 科技 |
| GOOGL | 谷歌 | 科技 |
| MSFT | 微软 | 科技 |
| AMZN | 亚马逊 | 电商 |
| TSLA | 特斯拉 | 汽车 |
| META | Meta | 社交媒体 |
| NVDA | 英伟达 | 半导体 |
| NFLX | Netflix | 娱乐 |
| ADBE | Adobe | 软件 |
| INTC | 英特尔 | 半导体 |

## 技术指标说明

### 移动平均线 (MA)
- **MA20**: 20日移动平均线，短期趋势指标
- **MA50**: 50日移动平均线，中期趋势指标
- **MA200**: 200日移动平均线，长期趋势指标

### 布林带
- 基于标准差的波动率指标
- 上轨 = MA20 + 2×标准差
- 下轨 = MA20 - 2×标准差
- 用于判断价格是否超买或超卖

### MACD指标
- **MACD线**: EMA(12) - EMA(26)，蓝色线
- **信号线**: MACD线的9日EMA，橙色线
- **柱状图**: MACD线 - 信号线，绿正红负
- 用于识别趋势变化和买卖时机
- 金叉（MACD上穿信号线）= 买入信号
- 死叉（MACD下穿信号线）= 卖出信号

### 买卖信号
- **买入信号 (B)**: 股价突破近期最高价 **且** MACD > 0，绿色▲标记
- **卖出信号 (S)**: 股价跌破近期最低价 **且** MACD < 0，红色▼标记
- 可选择信号周期：1个月、3个月、6个月、1年
- **智能过滤**: 结合MACD指标，避免逆势交易

## 文件说明

### 程序文件
- **[stock_viewer_gui.py](file:///d:\proj\Trae_AI\stock_viewer_gui.py)** - 完整版GUI（需要真实API）
- **[stock_viewer_gui_test.py](file:///d:\proj\Trae_AI\stock_viewer_gui_test.py)** - 测试版GUI（使用模拟数据）
- **[nasdaq_stock_fetcher.py](file:///d:\proj\Trae_AI\nasdaq_stock_fetcher.py)** - 核心数据获取模块
- **[requirements.txt](file:///d:\proj\Trae_AI\requirements.txt)** - 依赖包列表

### 文档文件
- **[GUI_README.md](file:///d:\proj\Trae_AI\GUI_README.md)** - GUI使用说明
- **[BUY_SELL_SIGNALS.md](file:///d:\proj\Trae_AI\BUY_SELL_SIGNALS.md)** - 买卖信号功能详解
- **[MACD_INDICATOR.md](file:///d:\proj\Trae_AI\MACD_INDICATOR.md)** - MACD指标使用指南

## 注意事项

1. **API限制**: 完整版使用yfinance API，可能遇到请求限制
2. **网络连接**: 需要稳定的网络连接才能获取数据
3. **数据延迟**: 实时数据可能有15-20分钟延迟
4. **测试版**: 测试版使用模拟数据，仅供演示功能

## 故障排除

### 问题: 无法获取数据
**解决方案:**
- 检查网络连接
- 确认股票代码正确
- 等待一段时间后重试（API限制）
- 使用测试版查看功能

### 问题: 图表不显示
**解决方案:**
- 确认已安装matplotlib
- 检查数据是否成功加载
- 尝试刷新图表

### 问题: 程序启动失败
**解决方案:**
- 确认已安装所有依赖包
- 检查Python版本（建议3.7+）
- 查看错误信息并解决

## 示例代码

### 在代码中使用

```python
from stock_viewer_gui import LeapsGUI
import tkinter as tk

root = tk.Tk()
app = LeapsGUI(root)
root.mainloop()
```

### 自定义配置

```python
# 修改窗口大小
root.geometry("1400x900")

# 修改默认股票代码
self.symbol_entry.insert(0, "TSLA")

# 修改默认时间周期
self.period_var.set("5y")
```

## 更新日志

### v1.3.0 (2026-02-16)
- ✨ 新增MACD过滤机制
- 🎯 买入信号：仅在MACD > 0时显示
- 🎯 卖出信号：仅在MACD < 0时显示
- 📈 提高信号准确性，避免逆势交易
- ⚙️ 自动计算MACD指标进行过滤

### v1.2.0 (2026-02-16)
- ✨ 新增MACD指标功能
- 📊 显示MACD线、信号线、柱状图
- 🎯 支持MACD买卖信号分析
- 📈 与价格突破信号配合使用
- ⚙️ 可开关MACD显示

### v1.1.0 (2026-02-16)
- ✨ 新增买卖信号功能
- 🎯 自动检测价格突破/跌破
- 📊 支持多种信号周期选择
- 🖼️ 可视化显示B/S标记
- ⚙️ 可开关信号显示

### v1.0.0 (2026-02-16)
- ✨ 初始版本发布
- 📊 支持多种图表类型
- 📈 集成技术指标
- 💾 支持数据导出
- 🖼️ 支持图表保存

## 许可证

本项目仅供学习和研究使用。

## 贡献

欢迎提交问题和改进建议！
